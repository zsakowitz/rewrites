import JSZip from "jszip"
import { shuffle } from "./shuffle"

type CharacterList = string[]
type ReadonlyCharacterList = readonly string[]

const allCharacters = [
  "#ï¸âƒ£",
  "*âƒ£",
  "0ï¸âƒ£",
  "1ï¸âƒ£",
  "2ï¸âƒ£",
  "3ï¸âƒ£",
  "4ï¸âƒ£",
  "5ï¸âƒ£",
  "6ï¸âƒ£",
  "7ï¸âƒ£",
  "8ï¸âƒ£",
  "9ï¸âƒ£",
  "Â©ï¸",
  "Â®ï¸",
  "â€¼ï¸",
  "â‰ï¸",
  "â„¢ï¸",
  "â„¹ï¸",
  "â†”ï¸",
  "â†•ï¸",
  "â†–ï¸",
  "â†—ï¸",
  "â†˜ï¸",
  "â†™ï¸",
  "â†©ï¸",
  "â†ªï¸",
  "âŒšï¸",
  "âŒ›ï¸",
  "âŒ¨",
  "â",
  "â©",
  "âª",
  "â«",
  "â¬",
  "â­",
  "â®",
  "â¯",
  "â°",
  "â±",
  "â²",
  "â³",
  "â¸",
  "â¹",
  "âº",
  "â“‚ï¸",
  "â–ªï¸",
  "â–«ï¸",
  "â–¶ï¸",
  "â—€ï¸",
  "â—»ï¸",
  "â—¼ï¸",
  "â—½ï¸",
  "â—¾ï¸",
  "â˜€ï¸",
  "â˜ï¸",
  "â˜‚",
  "â˜ƒ",
  "â˜„",
  "â˜ï¸",
  "â˜‘ï¸",
  "â˜”ï¸",
  "â˜•ï¸",
  "â˜˜",
  "â˜ï¸",
  "â˜ ",
  "â˜¢",
  "â˜£",
  "â˜¦",
  "â˜ª",
  "â˜®",
  "â˜¯",
  "â˜¸",
  "â˜¹",
  "â˜ºï¸",
  "â™ˆï¸",
  "â™‰ï¸",
  "â™Šï¸",
  "â™‹ï¸",
  "â™Œï¸",
  "â™ï¸",
  "â™ï¸",
  "â™ï¸",
  "â™ï¸",
  "â™‘ï¸",
  "â™’ï¸",
  "â™“ï¸",
  "â™ ï¸",
  "â™£ï¸",
  "â™¥ï¸",
  "â™¦ï¸",
  "â™¨ï¸",
  "â™»ï¸",
  "â™¿ï¸",
  "âš’",
  "âš“ï¸",
  "âš”",
  "âš–",
  "âš—",
  "âš™",
  "âš›",
  "âšœ",
  "âš ï¸",
  "âš¡ï¸",
  "âšªï¸",
  "âš«ï¸",
  "âš°",
  "âš±",
  "âš½ï¸",
  "âš¾ï¸",
  "â›„ï¸",
  "â›…ï¸",
  "â›ˆ",
  "â›",
  "â›",
  "â›‘",
  "â›“",
  "â›”ï¸",
  "â›©",
  "â›ªï¸",
  "â›°",
  "â›±",
  "â›²ï¸",
  "â›³ï¸",
  "â›´",
  "â›µï¸",
  "â›·",
  "â›¸",
  "â›¹",
  "â›ºï¸",
  "â›½ï¸",
  "âœ‚ï¸",
  "âœ…",
  "âœˆï¸",
  "âœ‰ï¸",
  "âœŠ",
  "âœ‹",
  "âœŒï¸",
  "âœ",
  "âœï¸",
  "âœ’ï¸",
  "âœ”ï¸",
  "âœ–ï¸",
  "âœ",
  "âœ¡",
  "âœ¨",
  "âœ³ï¸",
  "âœ´ï¸",
  "â„ï¸",
  "â‡ï¸",
  "âŒ",
  "â",
  "â“",
  "â”",
  "â•",
  "â—ï¸",
  "â£",
  "â¤ï¸",
  "â•",
  "â–",
  "â—",
  "â¡ï¸",
  "â°",
  "â¿",
  "â¤´ï¸",
  "â¤µï¸",
  "â¬…ï¸",
  "â¬†ï¸",
  "â¬‡ï¸",
  "â¬›ï¸",
  "â¬œï¸",
  "â­ï¸",
  "â­•ï¸",
  "ã€°ï¸",
  "ã€½ï¸",
  "ãŠ—ï¸",
  "ãŠ™ï¸",
  "ğŸ€„ï¸",
  "ğŸƒ",
  "ğŸ…°ï¸",
  "ğŸ…±ï¸",
  "ğŸ…¾ï¸",
  "ğŸ…¿ï¸",
  "ğŸ†",
  "ğŸ†‘",
  "ğŸ†’",
  "ğŸ†“",
  "ğŸ†”",
  "ğŸ†•",
  "ğŸ†–",
  "ğŸ†—",
  "ğŸ†˜",
  "ğŸ†™",
  "ğŸ†š",
  "ğŸˆ",
  "ğŸˆ‚ï¸",
  "ğŸˆšï¸",
  "ğŸˆ¯ï¸",
  "ğŸˆ²",
  "ğŸˆ³",
  "ğŸˆ´",
  "ğŸˆµ",
  "ğŸˆ¶",
  "ğŸˆ·ï¸",
  "ğŸˆ¸",
  "ğŸˆ¹",
  "ğŸˆº",
  "ğŸ‰",
  "ğŸ‰‘",
  "ğŸŒ€",
  "ğŸŒ",
  "ğŸŒ‚",
  "ğŸŒƒ",
  "ğŸŒ„",
  "ğŸŒ…",
  "ğŸŒ†",
  "ğŸŒ‡",
  "ğŸŒˆ",
  "ğŸŒ‰",
  "ğŸŒŠ",
  "ğŸŒ‹",
  "ğŸŒŒ",
  "ğŸŒ",
  "ğŸŒ",
  "ğŸŒ",
  "ğŸŒ",
  "ğŸŒ‘",
  "ğŸŒ’",
  "ğŸŒ“",
  "ğŸŒ”",
  "ğŸŒ•",
  // "ğŸŒ–",
  // "ğŸŒ—",
  // "ğŸŒ˜",
  "ğŸŒ™",
  "ğŸŒš",
  "ğŸŒ›",
  "ğŸŒœ",
  "ğŸŒ",
  "ğŸŒ",
  "ğŸŒŸ",
  "ğŸŒ ",
  "ğŸŒ¡",
  "ğŸŒ¤",
  "ğŸŒ¥",
  "ğŸŒ¦",
  "ğŸŒ§",
  "ğŸŒ¨",
  "ğŸŒ©",
  "ğŸŒª",
  "ğŸŒ«",
  "ğŸŒ¬",
  "ğŸŒ­",
  "ğŸŒ®",
  "ğŸŒ¯",
  "ğŸŒ°",
  "ğŸŒ±",
  "ğŸŒ²",
  "ğŸŒ³",
  "ğŸŒ´",
  "ğŸŒµ",
  "ğŸŒ¶",
  "ğŸŒ·",
  "ğŸŒ¸",
  "ğŸŒ¹",
  "ğŸŒº",
  "ğŸŒ»",
  "ğŸŒ¼",
  "ğŸŒ½",
  "ğŸŒ¾",
  "ğŸŒ¿",
  "ğŸ€",
  "ğŸ",
  "ğŸ‚",
  "ğŸƒ",
  "ğŸ„",
  "ğŸ…",
  "ğŸ†",
  "ğŸ‡",
  "ğŸˆ",
  "ğŸ‰",
  "ğŸŠ",
  "ğŸ‹",
  "ğŸŒ",
  "ğŸ",
  "ğŸ",
  "ğŸ",
  "ğŸ",
  "ğŸ‘",
  "ğŸ’",
  "ğŸ“",
  "ğŸ”",
  "ğŸ•",
  "ğŸ–",
  "ğŸ—",
  "ğŸ˜",
  "ğŸ™",
  "ğŸš",
  "ğŸ›",
  "ğŸœ",
  "ğŸ",
  "ğŸ",
  "ğŸŸ",
  "ğŸ ",
  "ğŸ¡",
  "ğŸ¢",
  "ğŸ£",
  "ğŸ¤",
  "ğŸ¥",
  "ğŸ¦",
  "ğŸ§",
  "ğŸ¨",
  "ğŸ©",
  "ğŸª",
  "ğŸ«",
  "ğŸ¬",
  "ğŸ­",
  "ğŸ®",
  "ğŸ¯",
  "ğŸ°",
  "ğŸ±",
  "ğŸ²",
  "ğŸ³",
  "ğŸ´",
  "ğŸµ",
  "ğŸ¶",
  "ğŸ·",
  "ğŸ¸",
  "ğŸ¹",
  "ğŸº",
  "ğŸ»",
  "ğŸ¼",
  "ğŸ½",
  "ğŸ¾",
  "ğŸ¿",
  "ğŸ€",
  "ğŸ",
  "ğŸ‚",
  "ğŸƒ",
  "ğŸ„",
  "ğŸ…",
  "ğŸ†",
  "ğŸ‡",
  "ğŸˆ",
  "ğŸ‰",
  "ğŸŠ",
  "ğŸ‹",
  "ğŸŒ",
  "ğŸ",
  "ğŸ",
  "ğŸ",
  "ğŸ",
  "ğŸ‘",
  "ğŸ’",
  "ğŸ“",
  "ğŸ–",
  "ğŸ—",
  "ğŸ™",
  "ğŸš",
  "ğŸ›",
  "ğŸ",
  "ğŸŸ",
  "ğŸ ",
  "ğŸ¡",
  "ğŸ¢",
  "ğŸ£",
  "ğŸ¤",
  "ğŸ¥",
  "ğŸ¦",
  "ğŸ§",
  "ğŸ¨",
  "ğŸ©",
  "ğŸª",
  "ğŸ«",
  "ğŸ¬",
  "ğŸ­",
  "ğŸ®",
  "ğŸ¯",
  "ğŸ°",
  "ğŸ±",
  "ğŸ²",
  "ğŸ³",
  "ğŸ´",
  "ğŸµ",
  "ğŸ¶",
  "ğŸ·",
  "ğŸ¸",
  "ğŸ¹",
  "ğŸº",
  "ğŸ»",
  "ğŸ¼",
  "ğŸ½",
  "ğŸ¾",
  "ğŸ¿",
  "ğŸ€",
  "ğŸ",
  "ğŸ‚",
  "ğŸƒ",
  "ğŸ„",
  "ğŸ…",
  "ğŸ†",
  "ğŸ‡",
  "ğŸˆ",
  "ğŸ‰",
  "ğŸŠ",
  "ğŸ‹",
  "ğŸŒ",
  "ğŸ",
  "ğŸ",
  "ğŸ",
  "ğŸ",
  "ğŸ‘",
  "ğŸ’",
  "ğŸ“",
  "ğŸ”",
  "ğŸ•",
  "ğŸ–",
  "ğŸ—",
  "ğŸ˜",
  "ğŸ™",
  "ğŸš",
  "ğŸ›",
  "ğŸœ",
  "ğŸ",
  "ğŸ",
  "ğŸŸ",
  "ğŸ ",
  "ğŸ¡",
  "ğŸ¢",
  "ğŸ£",
  "ğŸ¤",
  "ğŸ¥",
  "ğŸ¦",
  "ğŸ§",
  "ğŸ¨",
  "ğŸ©",
  "ğŸª",
  "ğŸ«",
  "ğŸ¬",
  "ğŸ­",
  "ğŸ®",
  "ğŸ¯",
  "ğŸ°",
  "ğŸ³",
  "ğŸ´",
  "ğŸµ",
  "ğŸ·",
  "ğŸ¸",
  "ğŸ¹",
  "ğŸº",
  "ğŸ€",
  "ğŸ",
  "ğŸ‚",
  "ğŸƒ",
  "ğŸ„",
  "ğŸ…",
  "ğŸ†",
  "ğŸ‡",
  "ğŸˆ",
  "ğŸ‰",
  "ğŸŠ",
  "ğŸ‹",
  "ğŸŒ",
  "ğŸ",
  "ğŸ",
  "ğŸ",
  "ğŸ",
  "ğŸ‘",
  "ğŸ’",
  "ğŸ“",
  "ğŸ”",
  "ğŸ•",
  "ğŸ–",
  "ğŸ—",
  "ğŸ˜",
  "ğŸ™",
  "ğŸš",
  "ğŸ›",
  "ğŸœ",
  "ğŸ",
  "ğŸ",
  "ğŸŸ",
  "ğŸ ",
  "ğŸ¡",
  "ğŸ¢",
  "ğŸ£",
  "ğŸ¤",
  "ğŸ¥",
  "ğŸ¦",
  "ğŸ§",
  "ğŸ¨",
  "ğŸ©",
  "ğŸª",
  "ğŸ«",
  "ğŸ¬",
  "ğŸ­",
  "ğŸ®",
  "ğŸ¯",
  "ğŸ°",
  "ğŸ±",
  "ğŸ²",
  "ğŸ³",
  "ğŸ´",
  "ğŸµ",
  "ğŸ¶",
  "ğŸ·",
  "ğŸ¸",
  "ğŸ¹",
  "ğŸº",
  "ğŸ»",
  "ğŸ¼",
  "ğŸ½",
  "ğŸ¾",
  "ğŸ¿",
  "ğŸ‘€",
  "ğŸ‘",
  "ğŸ‘‚",
  "ğŸ‘ƒ",
  "ğŸ‘„",
  "ğŸ‘…",
  "ğŸ‘†",
  "ğŸ‘‡",
  "ğŸ‘ˆ",
  "ğŸ‘‰",
  "ğŸ‘Š",
  "ğŸ‘‹",
  "ğŸ‘Œ",
  "ğŸ‘",
  "ğŸ‘",
  "ğŸ‘",
  "ğŸ‘",
  "ğŸ‘‘",
  "ğŸ‘’",
  "ğŸ‘“",
  "ğŸ‘”",
  "ğŸ‘•",
  "ğŸ‘–",
  "ğŸ‘—",
  "ğŸ‘˜",
  "ğŸ‘™",
  "ğŸ‘š",
  "ğŸ‘›",
  "ğŸ‘œ",
  "ğŸ‘",
  "ğŸ‘",
  "ğŸ‘Ÿ",
  "ğŸ‘ ",
  "ğŸ‘¡",
  "ğŸ‘¢",
  "ğŸ‘£",
  "ğŸ‘¤",
  "ğŸ‘¥",
  "ğŸ‘¦",
  "ğŸ‘§",
  "ğŸ‘¨",
  "ğŸ‘©",
  "ğŸ‘ª",
  "ğŸ‘«",
  "ğŸ‘¬",
  "ğŸ‘­",
  "ğŸ‘®",
  "ğŸ‘¯",
  "ğŸ‘°",
  "ğŸ‘±",
  "ğŸ‘²",
  "ğŸ‘³",
  "ğŸ‘´",
  "ğŸ‘µ",
  "ğŸ‘¶",
  "ğŸ‘·",
  "ğŸ‘¸",
  "ğŸ‘¹",
  "ğŸ‘º",
  "ğŸ‘»",
  "ğŸ‘¼",
  "ğŸ‘½",
  "ğŸ‘¾",
  "ğŸ‘¿",
  "ğŸ’€",
  "ğŸ’",
  "ğŸ’‚",
  "ğŸ’ƒ",
  "ğŸ’„",
  "ğŸ’…",
  "ğŸ’†",
  "ğŸ’‡",
  "ğŸ’ˆ",
  "ğŸ’‰",
  "ğŸ’Š",
  "ğŸ’‹",
  "ğŸ’Œ",
  "ğŸ’",
  "ğŸ’",
  "ğŸ’",
  "ğŸ’",
  "ğŸ’‘",
  "ğŸ’’",
  "ğŸ’“",
  "ğŸ’”",
  "ğŸ’•",
  "ğŸ’–",
  "ğŸ’—",
  "ğŸ’˜",
  "ğŸ’™",
  "ğŸ’š",
  "ğŸ’›",
  "ğŸ’œ",
  "ğŸ’",
  "ğŸ’",
  "ğŸ’Ÿ",
  "ğŸ’ ",
  "ğŸ’¡",
  "ğŸ’¢",
  "ğŸ’£",
  "ğŸ’¤",
  "ğŸ’¥",
  "ğŸ’¦",
  "ğŸ’§",
  "ğŸ’¨",
  "ğŸ’©",
  "ğŸ’ª",
  "ğŸ’«",
  "ğŸ’¬",
  "ğŸ’­",
  "ğŸ’®",
  "ğŸ’¯",
  "ğŸ’°",
  "ğŸ’±",
  "ğŸ’²",
  "ğŸ’³",
  "ğŸ’´",
  "ğŸ’µ",
  "ğŸ’¶",
  "ğŸ’·",
  "ğŸ’¸",
  "ğŸ’¹",
  "ğŸ’º",
  "ğŸ’»",
  "ğŸ’¼",
  "ğŸ’½",
  "ğŸ’¾",
  "ğŸ’¿",
  "ğŸ“€",
  "ğŸ“",
  "ğŸ“‚",
  "ğŸ“ƒ",
  "ğŸ“„",
  "ğŸ“…",
  "ğŸ“†",
  "ğŸ“‡",
  "ğŸ“ˆ",
  "ğŸ“‰",
  "ğŸ“Š",
  "ğŸ“‹",
  "ğŸ“Œ",
  "ğŸ“",
  "ğŸ“",
  "ğŸ“",
  "ğŸ“",
  "ğŸ“‘",
  "ğŸ“’",
  "ğŸ““",
  "ğŸ“”",
  "ğŸ“•",
  "ğŸ“–",
  "ğŸ“—",
  "ğŸ“˜",
  "ğŸ“™",
  "ğŸ“š",
  "ğŸ“›",
  "ğŸ“œ",
  "ğŸ“",
  "ğŸ“",
  "ğŸ“Ÿ",
  "ğŸ“ ",
  "ğŸ“¡",
  "ğŸ“¢",
  "ğŸ“£",
  "ğŸ“¤",
  "ğŸ“¥",
  "ğŸ“¦",
  "ğŸ“§",
  "ğŸ“¨",
  "ğŸ“©",
  "ğŸ“ª",
  "ğŸ“«",
  "ğŸ“¬",
  "ğŸ“­",
  "ğŸ“®",
  "ğŸ“¯",
  "ğŸ“°",
  "ğŸ“±",
  "ğŸ“²",
  "ğŸ“³",
  "ğŸ“´",
  "ğŸ“µ",
  "ğŸ“¶",
  "ğŸ“·",
  "ğŸ“¸",
  "ğŸ“¹",
  "ğŸ“º",
  "ğŸ“»",
  "ğŸ“¼",
  "ğŸ“½",
  "ğŸ“¿",
  "ğŸ”€",
  "ğŸ”",
  "ğŸ”‚",
  "ğŸ”ƒ",
  "ğŸ”„",
  "ğŸ”…",
  "ğŸ”†",
  "ğŸ”‡",
  "ğŸ”ˆ",
  "ğŸ”‰",
  "ğŸ”Š",
  "ğŸ”‹",
  "ğŸ”Œ",
  "ğŸ”",
  "ğŸ”",
  "ğŸ”",
  "ğŸ”",
  "ğŸ”‘",
  "ğŸ”’",
  "ğŸ”“",
  "ğŸ””",
  "ğŸ”•",
  "ğŸ”–",
  "ğŸ”—",
  "ğŸ”˜",
  "ğŸ”™",
  "ğŸ”š",
  "ğŸ”›",
  "ğŸ”œ",
  "ğŸ”",
  "ğŸ”",
  "ğŸ”Ÿ",
  "ğŸ” ",
  "ğŸ”¡",
  "ğŸ”¢",
  "ğŸ”£",
  "ğŸ”¤",
  "ğŸ”¥",
  "ğŸ”¦",
  "ğŸ”§",
  "ğŸ”¨",
  "ğŸ”©",
  "ğŸ”ª",
  "ğŸ”«",
  "ğŸ”¬",
  "ğŸ”­",
  "ğŸ”®",
  "ğŸ”¯",
  "ğŸ”°",
  "ğŸ”±",
  "ğŸ”²",
  "ğŸ”³",
  "ğŸ”´",
  "ğŸ”µ",
  "ğŸ”¶",
  "ğŸ”·",
  "ğŸ”¸",
  "ğŸ”¹",
  "ğŸ”º",
  "ğŸ”»",
  "ğŸ”¼",
  "ğŸ”½",
  "ğŸ•‰",
  "ğŸ•Š",
  "ğŸ•‹",
  "ğŸ•Œ",
  "ğŸ•",
  "ğŸ•",
  "ğŸ•",
  "ğŸ•‘",
  "ğŸ•’",
  "ğŸ•“",
  "ğŸ•”",
  "ğŸ••",
  // "ğŸ•–",
  // "ğŸ•—",
  // "ğŸ•˜",
  // "ğŸ•™",
  // "ğŸ•š",
  // "ğŸ•›",
  // "ğŸ•œ",
  // "ğŸ•",
  // "ğŸ•",
  // "ğŸ•Ÿ",
  // "ğŸ• ",
  // "ğŸ•¡",
  // "ğŸ•¢",
  // "ğŸ•£",
  // "ğŸ•¤",
  // "ğŸ•¥",
  // "ğŸ•¦",
  // "ğŸ•§",
  "ğŸ•¯",
  "ğŸ•°",
  "ğŸ•³",
  "ğŸ•´",
  "ğŸ•µ",
  "ğŸ•¶",
  "ğŸ•·",
  "ğŸ•¸",
  "ğŸ•¹",
  "ğŸ–‡",
  "ğŸ–Š",
  "ğŸ–‹",
  "ğŸ–Œ",
  "ğŸ–",
  "ğŸ–",
  "ğŸ–•",
  "ğŸ––",
  "ğŸ–¥",
  "ğŸ–¨",
  "ğŸ–±",
  "ğŸ–²",
  "ğŸ–¼",
  "ğŸ—‚",
  "ğŸ—ƒ",
  "ğŸ—„",
  "ğŸ—‘",
  "ğŸ—’",
  "ğŸ—“",
  "ğŸ—œ",
  "ğŸ—",
  "ğŸ—",
  "ğŸ—¡",
  "ğŸ—£",
  "ğŸ—¨",
  "ğŸ—¯",
  "ğŸ—³",
  "ğŸ—º",
  "ğŸ—»",
  "ğŸ—¼",
  "ğŸ—½",
  "ğŸ—¾",
  "ğŸ—¿",
  "ğŸ˜€",
  "ğŸ˜",
  "ğŸ˜‚",
  "ğŸ˜ƒ",
  "ğŸ˜„",
  "ğŸ˜…",
  "ğŸ˜†",
  "ğŸ˜‡",
  "ğŸ˜ˆ",
  "ğŸ˜‰",
  "ğŸ˜Š",
  "ğŸ˜‹",
  "ğŸ˜Œ",
  "ğŸ˜",
  "ğŸ˜",
  "ğŸ˜",
  "ğŸ˜",
  "ğŸ˜‘",
  "ğŸ˜’",
  "ğŸ˜“",
  "ğŸ˜”",
  "ğŸ˜•",
  "ğŸ˜–",
  "ğŸ˜—",
  "ğŸ˜˜",
  "ğŸ˜™",
  "ğŸ˜š",
  "ğŸ˜›",
  "ğŸ˜œ",
  "ğŸ˜",
  "ğŸ˜",
  "ğŸ˜Ÿ",
  "ğŸ˜ ",
  "ğŸ˜¡",
  "ğŸ˜¢",
  "ğŸ˜£",
  "ğŸ˜¤",
  "ğŸ˜¥",
  "ğŸ˜¦",
  "ğŸ˜§",
  "ğŸ˜¨",
  "ğŸ˜©",
  "ğŸ˜ª",
  "ğŸ˜«",
  "ğŸ˜¬",
  "ğŸ˜­",
  "ğŸ˜®",
  "ğŸ˜¯",
  "ğŸ˜°",
  "ğŸ˜±",
  "ğŸ˜²",
  "ğŸ˜³",
  "ğŸ˜´",
  "ğŸ˜µ",
  "ğŸ˜¶",
  "ğŸ˜·",
  "ğŸ˜¸",
  "ğŸ˜¹",
  "ğŸ˜º",
  "ğŸ˜»",
  "ğŸ˜¼",
  "ğŸ˜½",
  "ğŸ˜¾",
  "ğŸ˜¿",
  "ğŸ™€",
  "ğŸ™",
  "ğŸ™‚",
  "ğŸ™ƒ",
  "ğŸ™„",
  "ğŸ™…",
  "ğŸ™†",
  "ğŸ™‡",
  "ğŸ™ˆ",
  "ğŸ™‰",
  "ğŸ™Š",
  "ğŸ™‹",
  "ğŸ™Œ",
  "ğŸ™",
  "ğŸ™",
  "ğŸ™",
  "ğŸš€",
  "ğŸš",
  "ğŸš‚",
  "ğŸšƒ",
  "ğŸš„",
  "ğŸš…",
  "ğŸš†",
  "ğŸš‡",
  "ğŸšˆ",
  "ğŸš‰",
  "ğŸšŠ",
  "ğŸš‹",
  "ğŸšŒ",
  "ğŸš",
  "ğŸš",
  "ğŸš",
  "ğŸš",
  "ğŸš‘",
  "ğŸš’",
  "ğŸš“",
  "ğŸš”",
  "ğŸš•",
  "ğŸš–",
  "ğŸš—",
  "ğŸš˜",
  "ğŸš™",
  "ğŸšš",
  "ğŸš›",
  "ğŸšœ",
  "ğŸš",
  "ğŸš",
  "ğŸšŸ",
  "ğŸš ",
  "ğŸš¡",
  "ğŸš¢",
  "ğŸš£",
  "ğŸš¤",
  "ğŸš¥",
  "ğŸš¦",
  "ğŸš§",
  "ğŸš¨",
  "ğŸš©",
  "ğŸšª",
  "ğŸš«",
  "ğŸš¬",
  "ğŸš­",
  "ğŸš®",
  "ğŸš¯",
  "ğŸš°",
  "ğŸš±",
  "ğŸš²",
  "ğŸš³",
  "ğŸš´",
  "ğŸšµ",
  "ğŸš¶",
  "ğŸš·",
  "ğŸš¸",
  "ğŸš¹",
  "ğŸšº",
  "ğŸš»",
  "ğŸš¼",
  "ğŸš½",
  "ğŸš¾",
  "ğŸš¿",
  "ğŸ›€",
  "ğŸ›",
  "ğŸ›‚",
  "ğŸ›ƒ",
  "ğŸ›„",
  "ğŸ›…",
  "ğŸ›‹",
  "ğŸ›Œ",
  "ğŸ›",
  "ğŸ›",
  "ğŸ›",
  "ğŸ›",
  "ğŸ› ",
  "ğŸ›¡",
  "ğŸ›¢",
  "ğŸ›£",
  "ğŸ›¤",
  "ğŸ›¥",
  "ğŸ›©",
  "ğŸ›«",
  "ğŸ›¬",
  "ğŸ›°",
  "ğŸ›³",
  "ğŸ¤",
  "ğŸ¤‘",
  "ğŸ¤’",
  "ğŸ¤“",
  "ğŸ¤”",
  "ğŸ¤•",
  "ğŸ¤–",
  "ğŸ¤—",
  "ğŸ¤˜",
  "ğŸ¦€",
  "ğŸ¦",
  "ğŸ¦‚",
  "ğŸ¦ƒ",
  "ğŸ¦„",
  "ğŸ§€",
] as const

const canvas = document.createElement("canvas")
canvas.width = canvas.height = 1024

const context = canvas.getContext("2d")!
if (!context) {
  throw new Error("Could not acquire 2d canvas context.")
}

context.font = "80px sans-serif"
context.textBaseline = "middle"
context.textAlign = "center"

function padArrayToNearestSquare<T>(array: readonly T[]): (T | undefined)[] {
  const output: (T | undefined)[] = array.slice()
  const nextSquare = Math.ceil(Math.sqrt(array.length)) ** 2
  const remaining = nextSquare - array.length

  for (let i = 0; i < remaining; i++) {
    output.push(undefined)
  }

  return output
}

function random(min: number, max: number) {
  return Math.random() * (max - min) + min
}

function createAdjustment(x: number, y: number) {
  const scale = random(0.7, 2)
  const transX = random(-36, 36)
  const transY = random(-36, 36)

  return new DOMMatrix()
    .translate(transX, transY)
    .translate(x, y)
    .rotate(Math.random() * 360)
    .translate(-x, -y)
    .scale(scale, scale, undefined, x + transX, y + transY)
}

async function render(emojis: ReadonlyCharacterList): Promise<Blob> {
  context.clearRect(0, 0, canvas.width, canvas.height)

  const output = shuffle(padArrayToNearestSquare(emojis))
  const size = Math.sqrt(output.length)

  for (let i = 0; i < size; i++) {
    for (let j = 0; j < size; j++) {
      const index = i + j * size
      const emoji = output[index]

      if (emoji) {
        let x = (i + 0.5) * (canvas.width / size)
        let y = (j + 0.5) * (canvas.height / size)

        context.setTransform(createAdjustment(x, y))
        context.fillText(emoji, x, y)
        context.resetTransform()
      }
    }
  }

  const blob = await new Promise<Blob | null>((res) => canvas.toBlob(res))

  if (!blob) {
    throw new Error("Could not get blob.")
  }

  return blob
}

async function renderToImage(
  emojis: ReadonlyCharacterList
): Promise<HTMLImageElement> {
  const image = new Image()
  image.src = URL.createObjectURL(await render(emojis))
  return image
}

async function preview(emojis: ReadonlyCharacterList): Promise<string> {
  const image = await renderToImage(emojis)
  image.style.width = "512px"
  image.style.height = "512px"
  image.style.margin = "32px"

  document.body.append(image)
  document.body.style.margin = "0"

  return image.src
}

function next<T>(iterator: Iterator<T>): T {
  const { value, done } = iterator.next()

  if (done) {
    throw new Error("Iterator is done.")
  }

  return value
}

function makeCards(size: number): ReadonlyCharacterList[] {
  // Using an iterator prevents us from consuming the same item twice.
  const characters = shuffle(allCharacters)[Symbol.iterator]()

  const columns: CharacterList[] = [
    [],
    ...Array<void>(size)
      .fill()
      .map(() => []),
  ]

  const grid = Array<void>(size)
    .fill()
    .map(() =>
      Array<void>(size)
        .fill()
        .map<CharacterList>(() => [])
    )

  for (const row of grid) {
    const char = next(characters)
    columns[0]!.push(char)

    for (const cell of row) {
      cell.push(char)
    }
  }

  for (let columnsToShift = 0; columnsToShift < size; columnsToShift++) {
    for (let startingColumn = 0; startingColumn < size; startingColumn++) {
      const char = next(characters)
      columns[columnsToShift + 1]!.push(char)

      let column = startingColumn
      for (let i = 0; i < size; i++) {
        column += columnsToShift
        grid[i]![column % size]!.push(char)
      }
    }
  }

  return shuffle(grid.flat())
}

async function createGridZip(size: number) {
  const grid = makeCards(size)
  const zip = new JSZip()

  let index = 0

  await Promise.all(
    grid.map(async (emojis) => {
      const blob = await render(emojis)
      const myIndex = index++
      zip.file("./card-" + myIndex + ".png", blob)
    })
  )

  const blob = await zip.generateAsync({ type: "blob" })
  return URL.createObjectURL(blob)
}

function download(url: string) {
  const anchor = document.createElement("a")
  anchor.href = url
  anchor.download = "cards.zip"
  anchor.click()
}

function previewGrid(size: number) {
  makeCards(size).forEach(preview)
}

// download(await createGridZip(31))
